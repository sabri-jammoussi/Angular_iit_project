<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <!-- Back Link -->
    <a routerLink="/shop/orders"
        class="inline-flex items-center gap-2 text-sm text-gray-500 hover:text-brand-500 dark:text-gray-400 dark:hover:text-brand-400 transition-colors mb-6">
        <i class="fa-solid fa-arrow-left"></i> Back to My Orders
    </a>

    <!-- Loading -->
    @if (loading) {
    <div class="flex items-center justify-center py-20">
        <i class="fa-solid fa-spinner fa-spin text-3xl text-brand-500"></i>
    </div>
    }

    <!-- Order Detail -->
    @if (!loading && order) {
    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden">

        <!-- Header -->
        <div
            class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 px-6 py-4 border-b border-gray-200 dark:border-gray-700">
            <div>
                <h1 class="text-lg font-bold text-gray-800 dark:text-white/90">Order #{{ order.id }}</h1>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">
                    <i class="fa-regular fa-calendar mr-1"></i> {{ order.orderDate | date:'medium' }}
                </p>
            </div>
            <span class="inline-flex items-center px-3 py-1 text-sm font-medium rounded-full"
                [ngClass]="getStatusBadgeClasses(order.status)">
                {{ order.status }}
            </span>
        </div>

        <!-- Shipping Address -->
        <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
            <p class="text-xs font-semibold uppercase tracking-wider text-gray-400 dark:text-gray-500 mb-1">
                Shipping Address
            </p>
            <p class="text-sm text-gray-700 dark:text-gray-300">
                <i class="fa-solid fa-location-dot mr-1.5 text-brand-500"></i>{{ order.shippingAddress }}
            </p>
        </div>

        <!-- Order Items -->
        <div class="px-6 py-4">
            <p class="text-xs font-semibold uppercase tracking-wider text-gray-400 dark:text-gray-500 mb-3">
                Items
            </p>
            <div class="divide-y divide-gray-100 dark:divide-gray-700">
                @for (item of order.orderDetails; track item.id) {
                <div class="flex items-center justify-between py-3">
                    <div>
                        <p class="text-sm font-medium text-gray-800 dark:text-white/90">{{ item.productName }}</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">
                            Qty: {{ item.quantity }} Ã— {{ item.unitPrice | currency:'USD' }}
                        </p>
                    </div>
                    <p class="text-sm font-semibold text-gray-800 dark:text-white/90">
                        {{ item.lineTotal | currency:'USD' }}
                    </p>
                </div>
                }
            </div>
        </div>

        <!-- Total -->
        <div
            class="flex items-center justify-between px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700">
            <span class="text-sm font-semibold text-gray-700 dark:text-gray-300">Total</span>
            <span class="text-xl font-bold text-brand-500">{{ order.totalAmount | currency:'USD' }}</span>
        </div>

    </div>
    }
</div>